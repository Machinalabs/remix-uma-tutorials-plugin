import { Signer, BigNumberish } from "ethers";
import { Provider, TransactionRequest } from "@ethersproject/providers";
import { Contract, ContractFactory, Overrides } from "@ethersproject/contracts";

import { TokenMigrator } from "./TokenMigratorContractInterface";

export class TokenMigratorInstanceCreator extends ContractFactory {
  constructor(signer?: Signer) {
    super(_abi, _bytecode, signer);
  }

  deploy(
    _rate: { rawValue: BigNumberish },
    _oldToken: string,
    _newToken: string,
    overrides?: Overrides
  ): Promise<TokenMigrator> {
    return super.deploy(
      _rate,
      _oldToken,
      _newToken,
      overrides || {}
    ) as Promise<TokenMigrator>;
  }
  getDeployTransaction(
    _rate: { rawValue: BigNumberish },
    _oldToken: string,
    _newToken: string,
    overrides?: Overrides
  ): TransactionRequest {
    return super.getDeployTransaction(
      _rate,
      _oldToken,
      _newToken,
      overrides || {}
    );
  }
  attach(address: string): TokenMigrator {
    return super.attach(address) as TokenMigrator;
  }
  connect(signer: Signer): TokenMigratorInstanceCreator {
    return super.connect(signer) as TokenMigratorInstanceCreator;
  }
  static connect(
    address: string,
    signerOrProvider: Signer | Provider
  ): TokenMigrator {
    return new Contract(address, _abi, signerOrProvider) as TokenMigrator;
  }
}

const _abi = [
  {
    inputs: [
      {
        components: [
          {
            internalType: "uint256",
            name: "rawValue",
            type: "uint256",
          },
        ],
        internalType: "struct FixedPoint.Unsigned",
        name: "_rate",
        type: "tuple",
      },
      {
        internalType: "address",
        name: "_oldToken",
        type: "address",
      },
      {
        internalType: "address",
        name: "_newToken",
        type: "address",
      },
    ],
    stateMutability: "nonpayable",
    type: "constructor",
  },
  {
    inputs: [
      {
        internalType: "address",
        name: "",
        type: "address",
      },
    ],
    name: "hasMigrated",
    outputs: [
      {
        internalType: "bool",
        name: "",
        type: "bool",
      },
    ],
    stateMutability: "view",
    type: "function",
  },
  {
    inputs: [
      {
        internalType: "address",
        name: "tokenHolder",
        type: "address",
      },
    ],
    name: "migrateTokens",
    outputs: [],
    stateMutability: "nonpayable",
    type: "function",
  },
  {
    inputs: [],
    name: "newToken",
    outputs: [
      {
        internalType: "contract ExpandedIERC20",
        name: "",
        type: "address",
      },
    ],
    stateMutability: "view",
    type: "function",
  },
  {
    inputs: [],
    name: "oldToken",
    outputs: [
      {
        internalType: "contract VotingToken",
        name: "",
        type: "address",
      },
    ],
    stateMutability: "view",
    type: "function",
  },
  {
    inputs: [],
    name: "rate",
    outputs: [
      {
        internalType: "uint256",
        name: "rawValue",
        type: "uint256",
      },
    ],
    stateMutability: "view",
    type: "function",
  },
  {
    inputs: [],
    name: "snapshotId",
    outputs: [
      {
        internalType: "uint256",
        name: "",
        type: "uint256",
      },
    ],
    stateMutability: "view",
    type: "function",
  },
];

const _bytecode =
  "0x60806040523480156200001157600080fd5b506040516200107c3803806200107c833981810160405262000037919081019062000333565b62000052600084620001d960201b6200049c1790919060201c565b62000094576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016200008b906200045f565b60405180910390fd5b8260036000820151816000015590505080600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550816000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16639711715a6040518163ffffffff1660e01b8152600401602060405180830381600087803b1580156200018f57600080fd5b505af1158015620001a4573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250620001ca919081019062000389565b60028190555050505062000554565b6000620001ec82620001fe60201b60201c565b60000151836000015111905092915050565b62000208620002b5565b604051806020016040528062000235670de0b6b3a7640000856200023f60201b620005441790919060201c565b8152509050919050565b600080831415620002545760009050620002af565b60008284029050828482816200026657fe5b0414620002aa576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401620002a19062000481565b60405180910390fd5b809150505b92915050565b6040518060200160405280600081525090565b600081519050620002d98162000520565b92915050565b600060208284031215620002f257600080fd5b620002fe6020620004a3565b9050600062000310848285016200031c565b60008301525092915050565b6000815190506200032d816200053a565b92915050565b6000806000606084860312156200034957600080fd5b60006200035986828701620002df565b93505060206200036c86828701620002c8565b92505060406200037f86828701620002c8565b9150509250925092565b6000602082840312156200039c57600080fd5b6000620003ac848285016200031c565b91505092915050565b6000620003c4600f83620004d1565b91507f526174652063616e2774206265203000000000000000000000000000000000006000830152602082019050919050565b600062000406602183620004d1565b91507f536166654d6174683a206d756c7469706c69636174696f6e206f766572666c6f60008301527f77000000000000000000000000000000000000000000000000000000000000006020830152604082019050919050565b600060208201905081810360008301526200047a81620003b5565b9050919050565b600060208201905081810360008301526200049c81620003f7565b9050919050565b6000604051905081810181811067ffffffffffffffff82111715620004c757600080fd5b8060405250919050565b600082825260208201905092915050565b6000620004ef82620004f6565b9050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b6200052b81620004e2565b81146200053757600080fd5b50565b620005458162000516565b81146200055157600080fd5b50565b610b1880620005646000396000f3fe608060405234801561001057600080fd5b50600436106100625760003560e01c80632c4e722e146100675780632ddc79b714610085578063b31c710a146100a3578063c1684711146100c1578063c42bd05a146100dd578063d7625c88146100fb575b600080fd5b61006f61012b565b60405161007c9190610992565b60405180910390f35b61008d610137565b60405161009a9190610992565b60405180910390f35b6100ab61013d565b6040516100b891906108f5565b60405180910390f35b6100db60048036036100d691908101906106b1565b610162565b005b6100e5610456565b6040516100f291906108da565b60405180910390f35b610115600480360361011091908101906106b1565b61047c565b60405161012291906108bf565b60405180910390f35b60038060000154905081565b60025481565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600460008273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16156101ef576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016101e690610972565b60405180910390fd5b6001600460008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff02191690831515021790555061024f61065f565b60405180602001604052806000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16634ee2cd7e856002546040518363ffffffff1660e01b81526004016102b8929190610896565b60206040518083038186803b1580156102d057600080fd5b505afa1580156102e4573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506103089190810190610703565b815250905061032160008261049c90919063ffffffff16565b61032b5750610453565b61033361065f565b61035c6003604051806020016040529081600082015481525050836104b990919063ffffffff16565b9050600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166340c10f198483600001516040518363ffffffff1660e01b81526004016103bf929190610896565b602060405180830381600087803b1580156103d957600080fd5b505af11580156103ed573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061041191908101906106da565b610450576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161044790610932565b60405180910390fd5b50505b50565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60046020528060005260406000206000915054906101000a900460ff1681565b60006104a78261050c565b60000151836000015111905092915050565b6104c161065f565b604051806020016040528061050184600001516104f3670de0b6b3a7640000886000015161054490919063ffffffff16565b6105b490919063ffffffff16565b815250905092915050565b61051461065f565b604051806020016040528061053a670de0b6b3a76400008561054490919063ffffffff16565b8152509050919050565b60008083141561055757600090506105ae565b600082840290508284828161056857fe5b04146105a9576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105a090610952565b60405180910390fd5b809150505b92915050565b60006105f683836040518060400160405280601a81526020017f536166654d6174683a206469766973696f6e206279207a65726f0000000000008152506105fe565b905092915050565b60008083118290610645576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161063c9190610910565b60405180910390fd5b50600083858161065157fe5b049050809150509392505050565b6040518060200160405280600081525090565b60008135905061068181610a9d565b92915050565b60008151905061069681610ab4565b92915050565b6000815190506106ab81610acb565b92915050565b6000602082840312156106c357600080fd5b60006106d184828501610672565b91505092915050565b6000602082840312156106ec57600080fd5b60006106fa84828501610687565b91505092915050565b60006020828403121561071557600080fd5b60006107238482850161069c565b91505092915050565b610735816109c9565b82525050565b610744816109db565b82525050565b61075381610a11565b82525050565b61076281610a35565b82525050565b6000610773826109ad565b61077d81856109b8565b935061078d818560208601610a59565b61079681610a8c565b840191505092915050565b60006107ae600b836109b8565b91507f4d696e74206661696c65640000000000000000000000000000000000000000006000830152602082019050919050565b60006107ee6021836109b8565b91507f536166654d6174683a206d756c7469706c69636174696f6e206f766572666c6f60008301527f77000000000000000000000000000000000000000000000000000000000000006020830152604082019050919050565b60006108546017836109b8565b91507f416c7265616479206d6967726174656420746f6b656e730000000000000000006000830152602082019050919050565b61089081610a07565b82525050565b60006040820190506108ab600083018561072c565b6108b86020830184610887565b9392505050565b60006020820190506108d4600083018461073b565b92915050565b60006020820190506108ef600083018461074a565b92915050565b600060208201905061090a6000830184610759565b92915050565b6000602082019050818103600083015261092a8184610768565b905092915050565b6000602082019050818103600083015261094b816107a1565b9050919050565b6000602082019050818103600083015261096b816107e1565b9050919050565b6000602082019050818103600083015261098b81610847565b9050919050565b60006020820190506109a76000830184610887565b92915050565b600081519050919050565b600082825260208201905092915050565b60006109d4826109e7565b9050919050565b60008115159050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b6000610a1c82610a23565b9050919050565b6000610a2e826109e7565b9050919050565b6000610a4082610a47565b9050919050565b6000610a52826109e7565b9050919050565b60005b83811015610a77578082015181840152602081019050610a5c565b83811115610a86576000848401525b50505050565b6000601f19601f8301169050919050565b610aa6816109c9565b8114610ab157600080fd5b50565b610abd816109db565b8114610ac857600080fd5b50565b610ad481610a07565b8114610adf57600080fd5b5056fea2646970667358221220f3b760f34b04d42cfe70be01f59f9d9ccd4cff3ef5a69a3f1511e455e3f8da2764736f6c63430006020033";
